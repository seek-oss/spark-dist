plugins {
    id 'scala'
}

repositories {
    mavenCentral()
    mavenLocal()
}

configurations.all {
    exclude group: 'commons-logging', module: 'commons-logging'
    resolutionStrategy {
        // because hadoop-common brings different jackson versions
        force "com.fasterxml.jackson.core:jackson-core:2.7.8"
        force "com.fasterxml.jackson.core:jackson-databind:2.10.1"
        force "com.fasterxml.jackson.module:jackson-module-scala_2.11:2.7.8"
    }
}

dependencies {
    runtime "com.amazonaws:aws-java-sdk-s3:${awsVersion}"
    runtime "org.apache.spark:spark-core_${scalaBuildVersion}:2.3.1"
    runtime "org.apache.spark:spark-sql_${scalaBuildVersion}:2.3.1"
    runtime "org.apache.spark:spark-repl_${scalaBuildVersion}:2.3.1"

    runtime("org.apache.hadoop:hadoop-aws:3.1.1")
    runtime("org.apache.hadoop:hadoop-common:3.1.1")
}

task jars() {
    delete 'jars/'
    copy {
        from sourceSets.main.runtimeClasspath
        into 'jars/'
    }
}